<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Notas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../css/global.css">
</head>
<body>
    <div class="app-layout d-flex">
        <div id="sidebar-container"></div>
        
        <div class="main-content">
            <div id="header-container"></div>

            <main>
                <div class="mb-4">
                    <h2 class="fw-bold">Minhas Notas</h2>
                    <p class="text-muted">Consulte e imprima seu boletim de notas</p>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Filtros</h5>
                                <div class="mb-3">
                                    <label class="form-label">Disciplina</label>
                                    <select class="form-select" id="disciplinaFilter">
                                        <option value="">Todas as disciplinas</option>
                                        <option value="portugues">Português</option>
                                        <option value="matematica">Matemática</option>
                                        <option value="historia">História</option>
                                        <option value="fisica">Física</option>
                                        <option value="quimica">Química</option>
                                        <option value="biologia">Biologia</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Período</label>
                                    <select class="form-select" id="periodoFilter">
                                        <option value="">Todos os períodos</option>
                                        <option value="p1">P1 (Primeiro Período)</option>
                                        <option value="p2">P2 (Segundo Período)</option>
                                        <option value="p3">P3 (Terceiro Período)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm bg-light">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Legenda de Avaliações</h5>
                                <div class="row g-2 small">
                                    <div class="col-6">
                                        <p><strong>P1:</strong> Prova 1</p>
                                        <p><strong>P2:</strong> Prova 2</p>
                                    </div>
                                    <div class="col-6">
                                        <p><strong>MAC:</strong> Média de Atividades Contínuas</p>
                                        <p><strong>Média:</strong> Média Final da Disciplina</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title mb-0 fw-bold">Boletim de Notas</h5>
                            <div class="gap-2 d-flex">
                                <button class="btn btn-sm btn-primary" onclick="imprimirBoletim()">
                                    <i class="bi bi-printer"></i> Imprimir
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="gerarPDF()">
                                    <i class="bi bi-file-earmark-pdf"></i> Baixar PDF
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div id="boletimContent">
                            <!-- Boletim para impressão -->
                            <div style="padding: 30px;">
                                <div class="text-center mb-4" style="border-bottom: 2px solid #0066cc; padding-bottom: 20px;">
                                    <h3 style="margin: 0;"><i class="bi bi-book"></i> ESCOLA CONECTADA</h3>
                                    <p style="margin: 10px 0 0 0; color: #666;">Boletim de Notas do Aluno</p>
                                </div>

                                <table style="width: 100%; margin: 20px 0;">
                                    <tr>
                                        <td style="width: 50%;"><strong>Aluno:</strong> João da Silva</td>
                                        <td><strong>Nº:</strong> 12001</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Turma:</strong> 11ºA</td>
                                        <td><strong>Ano Letivo:</strong> 2023/2024</td>
                                    </tr>
                                </table>

                                <table class="table table-bordered" style="margin: 30px 0;">
                                    <thead style="background-color: #0066cc; color: white;">
                                        <tr>
                                            <th>Disciplina</th>
                                            <th class="text-center">P1</th>
                                            <th class="text-center">P2</th>
                                            <th class="text-center">MAC</th>
                                            <th class="text-center">Frequência</th>
                                            <th class="text-center">Média Final</th>
                                            <th class="text-center">Situação</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Português</td>
                                            <td class="text-center">17,5</td>
                                            <td class="text-center">16,0</td>
                                            <td class="text-center">17,0</td>
                                            <td class="text-center">95%</td>
                                            <td class="text-center"><strong>16,8</strong></td>
                                            <td class="text-center"><span class="badge bg-success">Aprovado</span></td>
                                        </tr>
                                        <tr>
                                            <td>Matemática</td>
                                            <td class="text-center">18,0</td>
                                            <td class="text-center">17,5</td>
                                            <td class="text-center">16,5</td>
                                            <td class="text-center">100%</td>
                                            <td class="text-center"><strong>17,3</strong></td>
                                            <td class="text-center"><span class="badge bg-success">Aprovado</span></td>
                                        </tr>
                                        <tr>
                                            <td>História</td>
                                            <td class="text-center">15,5</td>
                                            <td class="text-center">16,0</td>
                                            <td class="text-center">15,5</td>
                                            <td class="text-center">92%</td>
                                            <td class="text-center"><strong>15,7</strong></td>
                                            <td class="text-center"><span class="badge bg-success">Aprovado</span></td>
                                        </tr>
                                        <tr>
                                            <td>Física</td>
                                            <td class="text-center">14,0</td>
                                            <td class="text-center">15,0</td>
                                            <td class="text-center">14,5</td>
                                            <td class="text-center">88%</td>
                                            <td class="text-center"><strong>14,5</strong></td>
                                            <td class="text-center"><span class="badge bg-warning text-dark">Acompanhamento</span></td>
                                        </tr>
                                        <tr>
                                            <td>Química</td>
                                            <td class="text-center">12,5</td>
                                            <td class="text-center">13,0</td>
                                            <td class="text-center">12,0</td>
                                            <td class="text-center">85%</td>
                                            <td class="text-center"><strong>12,5</strong></td>
                                            <td class="text-center"><span class="badge bg-danger">Em Risco</span></td>
                                        </tr>
                                        <tr>
                                            <td>Biologia</td>
                                            <td class="text-center">16,0</td>
                                            <td class="text-center">15,5</td>
                                            <td class="text-center">16,0</td>
                                            <td class="text-center">96%</td>
                                            <td class="text-center"><strong>15,8</strong></td>
                                            <td class="text-center"><span class="badge bg-success">Aprovado</span></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 30px;">
                                    <p style="margin: 0;"><strong>Média Geral:</strong> <span style="font-size: 18px; color: #0066cc;">15,3</span></p>
                                    <p style="margin: 10px 0 0 0; color: #666; font-size: 14px;">Calculada com base nas médias de todas as disciplinas</p>
                                </div>

                                <div style="margin-top: 30px; text-align: center; color: #999; font-size: 12px;">
                                    <p>Documento gerado automaticamente pelo Sistema Escola Conectada</p>
                                    <p>Data: 16/01/2026 | Assinado digitalmente</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/global.js"></script>
    <script>
        // Nota: Para implementar PDF real, adicionar biblioteca jsPDF:
        // <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
        
        function imprimirBoletim() {
            window.print();
        }

        function gerarPDF() {
            // Implementação simplificada - em produção usar html2pdf
            alert('Para gerar PDF em produção:\n1. Instalar html2pdf via CDN\n2. Usar html2pdf().set(options).from(element).save();\n\nPor enquanto, use Imprimir → Guardar como PDF');
        }

        // Filtros
        document.getElementById('disciplinaFilter').addEventListener('change', function() {
            console.log('Filtrar por disciplina:', this.value);
            // Implementar lógica de filtro
        });

        document.getElementById('periodoFilter').addEventListener('change', function() {
            console.log('Filtrar por período:', this.value);
            // Implementar lógica de filtro
        });
    </script>
</body>
</html>
